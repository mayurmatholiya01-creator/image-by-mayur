<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tile Search</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #0f1f1f; color: #fff; padding: 20px;
    }
    .container { max-width: 800px; margin: 0 auto; }
    .main-card {
      background: linear-gradient(135deg,#1a3333 0%,#0d2626 100%);
      border-radius:16px; padding:32px; border:1px solid #2d4a4a;
      box-shadow:0 20px 60px rgba(0,0,0,0.4); position:relative;
    }
    .main-card::before {
      content:''; position:absolute; top:0; left:0; right:0; height:2px;
      background:linear-gradient(90deg,#10b981,#059669,#047857);
    }
    .filter-section, .search-section { margin-bottom:24px; }
    .filter-label {
      color:#d1d5db; font-size:14px; font-weight:600;
      text-transform:uppercase; letter-spacing:0.5px;
      display:block; margin-bottom:8px;
    }
    .filter-dropdown, .search-input {
      width:100%; padding:16px 20px; background:#1a3333;
      border:1px solid #2d4a4a; border-radius:12px; color:#fff;
      font-size:16px; outline:none; transition:0.3s;
    }
    .filter-dropdown {
      appearance:none; padding-right:50px;
      background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
      background-repeat:no-repeat; background-position:right 16px center; background-size:16px;
    }
    .filter-dropdown:focus, .search-input:focus {
      border-color:#10b981; box-shadow:0 0 0 3px rgba(16,185,129,0.1);
    }
    .results-container {
      background:#1a3333; border:1px solid #2d4a4a;
      border-radius:12px; padding:24px; color:#6b7280;
    }
    .tile {
      display:flex; align-items:center;
      background:#152a2a; border:1px solid #2d4a4a;
      border-radius:12px; margin-bottom:16px; overflow:hidden;
    }
    .tile img {
      width:80px; height:80px; object-fit:cover;
      border-right:1px solid #2d4a4a;
    }
    .tile-info {
      flex:1; padding:12px;
    }
    .tile-info strong { color:#fff; }
    .tile-buttons {
      display:flex; gap:8px; padding:12px;
    }
    .tile-buttons button {
      background:#10b981; border:none; color:#fff;
      padding:8px 12px; border-radius:8px; cursor:pointer;
      font-size:14px;
    }
    .tile-buttons button.share {
      background:#374151;
    }
    @media(max-width:480px){
      .tile { flex-direction:column; text-align:center; }
      .tile img { width:100%; height:auto; border:none; }
      .tile-buttons { justify-content:center; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="main-card">
      <div class="filter-section">
        <label class="filter-label">Filter by Size</label>
        <select id="sizeFilter" class="filter-dropdown">
          <option value="">All Sizes</option>
        </select>
      </div>
      <div class="search-section">
        <input id="searchInput" class="search-input" type="text"
               placeholder="Search tiles by design name..." />
      </div>
      <div id="resultsContainer" class="results-container">
        <div class="results-placeholder">Your tile results will appear here</div>
      </div>
    </div>
  </div>

  <script>
    const sizeFilter = document.getElementById('sizeFilter');
    const searchInput = document.getElementById('searchInput');
    const resultsContainer = document.getElementById('resultsContainer');
    let tilesData = [];

    function populateSizeFilter() {
      const sizes = [...new Set(tilesData.map(t=>t.dimensions))].sort();
      sizes.forEach(size=>{
        const o=document.createElement('option');
        o.value=size; o.textContent=size;
        sizeFilter.appendChild(o);
      });
    }

    function displayTiles(list) {
      if(!list.length){
        resultsContainer.innerHTML='<div class="results-placeholder">No tiles found</div>';
        return;
      }
      resultsContainer.innerHTML = list.map(tile=>`
        <div class="tile">
          <img src="${tile.url}" alt="${tile.design_name}" loading="lazy">
          <div class="tile-info">
            <strong>${tile.design_name}</strong><br>
            <small>${tile.dimensions}</small>
          </div>
          <div class="tile-buttons">
            <button onclick="downloadFile('${tile.url}','${tile.design_name}.jpg')">Download</button>
            <button class="share" onclick="navigator.share&&navigator.share({title:tile.design_name,url:tile.url})">Share</button>
          </div>
        </div>
      `).join('');
    }

    function applyFilters(){
      const term=searchInput.value.toLowerCase().trim();
      const size=sizeFilter.value;
      let filtered=tilesData;
      if(term) filtered=filtered.filter(t=>t.design_name.toLowerCase().includes(term));
      if(size) filtered=filtered.filter(t=>t.dimensions===size);
      displayTiles(filtered);
    }

    searchInput.addEventListener('input',applyFilters);
    sizeFilter.addEventListener('change',applyFilters);

    function downloadFile(url, name){
      const a=document.createElement('a');
      a.href=url; a.download=name; document.body.appendChild(a);
      a.click(); document.body.removeChild(a);
    }

    async function loadData() {
      const csvUrl='https://docs.google.com/spreadsheets/d/1oHpJw-_zLdf_jt2SL5l7Hpiu8nSK9gvXfLEVvLlz5cM/export?format=csv&gid=622851011';
      try {
        const r=await fetch(csvUrl);
        const text=await r.text();
        const [h,...rows]=text.trim().split('\n');
        rows.forEach(line=>{
          const [filename,dimensions,design_name,url,uploaded_at]=line.split(',');
          tilesData.push({filename,dimensions,design_name,url,uploaded_at});
        });
        populateSizeFilter(); applyFilters();
      } catch(e){
        console.error(e);
        resultsContainer.innerHTML='<div class="results-placeholder">Failed to load data.</div>';
      }
    }
    loadData();
  </script>
</body>
</html>
